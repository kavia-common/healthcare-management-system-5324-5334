{"is_source_file": true, "format": "Dart", "description": "This Dart file defines the AuthProvider class which manages authentication logic, including login, registration, token refresh, user profile management, and logout for a Flutter healthcare management app.", "external_files": ["../core/api_client.dart", "../core/auth_storage.dart"], "external_methods": ["ApiClient.postForm", "ApiClient.postJson", "ApiClient.get", "ApiClient.patchJson", "AuthStorage.getAccessToken", "AuthStorage.getRefreshToken", "AuthStorage.saveTokens", "AuthStorage.clear"], "published": ["AuthProvider"], "classes": [{"name": "AuthProvider", "description": "A ChangeNotifier class managing user authentication state, including login, registration, token refresh, profile fetch/update, and logout."}], "methods": [{"name": "initialize", "description": "Initializes the authentication state by loading stored tokens without auto calling 'whoami'."}, {"name": "login", "description": "Authenticates a user with email and password, retrieves tokens, and fetches user profile on success."}, {"name": "register", "description": "Registers a new user (patient role) and logs in automatically upon success."}, {"name": "refreshTokens", "description": "Uses the refresh token to obtain new access and refresh tokens."}, {"name": "fetchProfile", "description": "Retrieves the current user's profile information from the server."}, {"name": "updateProfile", "description": "Updates the current user's profile fields such as 'full_name'."}, {"name": "logout", "description": "Clears authentication tokens and user profile, logging out the user."}], "calls": ["api.postForm('/auth/login', {...})", "api.postJson('/auth/register', {...})", "api.postJson('/auth/refresh', {...})", "api.get('/auth/whoami')", "api.patchJson('/users/me', {...})", "storage.getAccessToken()", "storage.getRefreshToken()", "storage.saveTokens(...)", "storage.clear()"], "search-terms": ["AuthProvider", "token lifecycle", "user profile", "login", "register", "refresh token", "logout"], "state": 2, "file_id": 23, "knowledge_revision": 48, "git_revision": "", "hash": "220124f7076b233754f0c7ea9f962def", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/state/auth_provider.dart", "revision_history": [{"48": ""}]}